---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getGitPageDoc, sbFieldPath, sbObjectId } from '@lib/stackbit';
import SectionRenderer from '@/components/SectionRenderer.astro';

const pageDoc: any = await getGitPageDoc('contact');
--- 

<BaseLayout : hideBrandTag="true">
  <div>
    <div {...sbObjectId('content/pages/contact.json')}>
      <div aria-hidden="true" class="hidden" {...sbFieldPath('title')}>{pageDoc?.title ?? 'Contact'}</div>
      {Array.isArray(pageDoc?.sections) && pageDoc.sections.length > 0 && (
        <SectionRenderer sections={pageDoc.sections} baseFieldPath="sections" />
      )}
      <div class="relative mt-11 pt-20">
      <section class="min-h-screen racing-stripe text-white font-mono">
        <!-- Google Map Embed -->
        <div class="w-full h-[400px] grayscale contrast-125 saturate-0">
          <iframe
            src="https://www.google.com/maps?q=6161+Riverside+Dr,+Fort+Myers,+FL+33982&output=embed"
            width="100%"
            height="100%"
            style="border:0;"
            allowfullscreen
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>

        <!-- Contact Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-10 max-w-6xl mx-auto px-6 py-16">
          
          <!-- Contact Form (Netlify Forms; no JS/server required) -->
          <form
            id="contact-form"
            name="contact"
            method="POST"
            data-netlify="true"
            netlify-honeypot="bot-field"
            action="/contact/success"
            class="space-y-6 bg-charcoal backdrop-blur-sm p-8 rounded-sm border border-gray-700 shadow-lg relative"
          >
            <input type="hidden" name="form-name" value="contact" />
            <p class="hidden"><label>Don’t fill this out if you’re human: <input name="bot-field" /></label></p>
            <h2 class="text-3xl font-cyber text-accent mb-4">Send a Message</h2>

            <div>
              <label for="name" class="block text-sm text-white/60 mb-1">Name</label>
              <input type="text" id="name" name="name" required class="w-full px-4 py-2 bg-black border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-primary text-white" />
            </div>

            <div>
              <label for="email" class="block text-sm text-white/60 mb-1">Email</label>
              <input type="email" id="email" name="email" required class="w-full px-4 py-2 bg-black border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-primary text-white" />
            </div>

            <div>
              <label for="topic" class="block text-sm text-white/60 mb-1">Topic</label>
              <select id="topic" name="topic" class="w-full px-4 py-2 bg-black border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-primary text-white">
                <option value="support">Support</option>
                <option value="sales">Sales</option>
                <option value="info">General</option>
              </select>
            </div>

            <div>
              <label for="message" class="block text-sm text-white/60 mb-1">Message</label>
              <textarea id="message" name="message" rows="4" required class="w-full px-4 py-2 bg-black border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-primary text-white"></textarea>
            </div>

            <button type="submit" class="bg-primary hover:bg-accent text-accent font-bold py-2 px-6 rounded transition duration-200">
              Send
            </button>
          </form>

          <!-- Contact Info -->
          <div class="flex flex-col justify-start backdrop-blur-sm p-2 rounded-lg border bg-black/10 border-gray-700 shadow-lg">
            <h2 class="text-3xl font-cyber text-accent mb-6">Contact Info</h2>
            <p class="mb-4 text-white/60"><strong class="text-primary">Phone:</strong> (812) 200-9012</p>
            <p class="mb-4 text-white/60">
              <strong class="text-primary">Email:</strong>
              <a href="mailto:support@fasmotorsports.com" class="text-accent hover:text-primary">support@fasmotorsports.com</a>
            </p>
            <p class="mb-4 text-white/60">
              <strong class="text-primary">Sales:</strong>
              <a href="mailto:sales@fasmotorsports.com" class="text-accent hover:text-primary">sales@fasmotorsports.com</a>
            </p>
            <p class="mb-4 text-white/60">
              <strong class="text-primary">Hours:</strong> Mon–Fri, 9am–5pm
            </p>
          </div>
        </div>
      </section>
    </div>
  </div>
</BaseLayout>

<!-- LocalBusiness JSON-LD -->
<script type="application/ld+json">
{JSON.stringify({
  '@context': 'https://schema.org',
  '@type': 'AutoRepair',
  name: 'F.A.S. Motorsports',
  url: 'https://fasmotorsports.com',
  telephone: '(812) 200-9012',
  address: {
    '@type': 'PostalAddress',
    streetAddress: '6161 Riverside Dr',
    addressLocality: 'Fort Myers',
    addressRegion: 'FL',
    postalCode: '33982',
    addressCountry: 'US'
  }
})}
</script>
