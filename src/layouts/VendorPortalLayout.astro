---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { requireVendor } from '@/server/vendor-portal/auth';

const { title = 'Vendor Portal', description } = Astro.props as {
  title?: string;
  description?: string;
};

const ctx = await requireVendor(Astro.request);
if (!ctx.ok) {
  return ctx.response;
}

const navLinks = [
  { href: '/vendor-portal', label: 'Dashboard' },
  { href: '/vendor-portal/orders', label: 'Orders' },
  { href: '/vendor-portal/inventory', label: 'Inventory' },
  { href: '/vendor-portal/invoices', label: 'Invoices' },
  { href: '/vendor-portal/payments', label: 'Payments' },
  { href: '/vendor-portal/messages', label: 'Messages' },
  { href: '/vendor-portal/analytics', label: 'Analytics' },
  { href: '/vendor-portal/documents', label: 'Documents' },
  { href: '/vendor-portal/settings', label: 'Settings' },
  { href: '/vendor-portal/onboarding', label: 'Onboarding Guide' }
];
---

<BaseLayout title={`${title} | FAS Motorsports`} description={description} noindex>
  <div class="min-h-screen bg-black text-white px-4 py-6 md:px-6">
    <div class="mx-auto max-w-6xl">
      <div class="grid gap-6 md:grid-cols-[220px,1fr]">
        <aside class="rounded-xl border border-white/10 bg-white/5 p-4">
          <div class="mb-4">
            <p class="text-xs uppercase tracking-[0.18em] text-white/70 font-semibold">Vendor</p>
            <p class="text-base font-bold text-white">FAS Motorsports</p>
          </div>
          <nav class="space-y-1 text-sm">
            {navLinks.map((item) => (
              <a
                href={item.href}
                class="flex items-center gap-2 rounded-lg px-3 py-2 text-white/80 hover:bg-white/10 hover:text-white transition"
              >
                <span>â€¢</span>
                <span>{item.label}</span>
              </a>
            ))}
          </nav>
        </aside>
        <main class="space-y-4">
          <header>
            <p class="text-xs uppercase tracking-[0.18em] text-white/60 font-semibold">Vendor Portal</p>
            <h1 class="text-2xl md:text-3xl font-bold text-white">{title}</h1>
          </header>
          <div class="rounded-2xl border border-white/10 bg-white/5 p-4 md:p-6">
            <slot />
          </div>
        </main>
      </div>
    </div>
  </div>
</BaseLayout>
