---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { requireVendor } from '@/server/vendor-portal/auth';
import VendorPortalFlyoutNav from '../components/vendor-portal/VendorPortalFlyoutNav.tsx';

const { title = 'Vendor Portal', description } = Astro.props as {
  title?: string;
  description?: string;
};

const ctx = await requireVendor(Astro.request);
if (!ctx.ok) {
  return ctx.response;
}
---

<BaseLayout title={`${title} | FAS Motorsports`} description={description} noindex>
  <div class="min-h-screen bg-dark text-white">
    <VendorPortalFlyoutNav client:load />
    <main class="pt-20 pb-10">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="rounded-2xl border border-white/10 bg-white/5 p-4 md:p-6 shadow-lg">
          <header class="mb-4">
            <p class="text-xs uppercase tracking-[0.18em] text-white/60 font-semibold">
              Vendor Portal
            </p>
            <h1 class="text-2xl md:text-3xl font-bold text-white">{title}</h1>
          </header>
          <slot />
        </div>
      </div>
    </main>
  </div>

  <style>
    /* Hide the global storefront header inside vendor portal pages */
    :global(header.text-white.w-full.fixed.top-0) {
      display: none !important;
    }
    :global(.with-header-offset) {
      margin-top: 0 !important;
    }
  </style>
</BaseLayout>
