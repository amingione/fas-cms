---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Become a Vendor | F.A.S. Motorsports">
  <div class="vendor-application-page">
    <section class="hero">
      <div class="container">
        <h1>Partner with F.A.S. Motorsports</h1>
        <p class="subtitle">Join our network of performance shops and resellers</p>
      </div>
    </section>

    <section class="benefits">
      <div class="container">
        <h2>Why Partner with F.A.S.?</h2>
        <div class="benefits-grid">
          <div class="benefit">
            <div class="icon">üí∞</div>
            <h3>Wholesale Pricing</h3>
            <p>Get 20-40% off retail prices based on your tier</p>
            <ul>
              <li>Standard: 20% off retail</li>
              <li>Preferred: 30% off retail</li>
              <li>Platinum: 40% off retail</li>
            </ul>
          </div>

          <div class="benefit">
            <div class="icon">üè≠</div>
            <h3>Direct from Manufacturer</h3>
            <p>We manufacture our own performance parts in-house</p>
            <ul>
              <li>No middleman markup</li>
              <li>Quality control guaranteed</li>
              <li>Custom builds available</li>
            </ul>
          </div>

          <div class="benefit">
            <div class="icon">üì¶</div>
            <h3>Flexible Terms</h3>
            <p>Payment terms that work for your business</p>
            <ul>
              <li>Net 30, 60, or 90 days</li>
              <li>Credit limits up to $50k</li>
              <li>Drop shipping available</li>
            </ul>
          </div>

          <div class="benefit">
            <div class="icon">üöö</div>
            <h3>Fast Shipping</h3>
            <p>Quick turnaround on wholesale orders</p>
            <ul>
              <li>Most orders ship within 2-3 days</li>
              <li>Freight shipping available</li>
              <li>Track orders online</li>
            </ul>
          </div>

          <div class="benefit">
            <div class="icon">üéØ</div>
            <h3>Marketing Support</h3>
            <p>We help you sell our products</p>
            <ul>
              <li>Product photos & descriptions</li>
              <li>Technical specs & install guides</li>
              <li>Co-branded marketing materials</li>
            </ul>
          </div>

          <div class="benefit">
            <div class="icon">ü§ù</div>
            <h3>Dedicated Support</h3>
            <p>Account manager for your business</p>
            <ul>
              <li>Direct phone & email support</li>
              <li>Technical assistance</li>
              <li>Custom quote requests</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section class="who-should-apply">
      <div class="container">
        <h2>Who Should Apply?</h2>
        <div class="apply-grid">
          <div class="apply-card">
            <h3>üè™ Performance Shops</h3>
            <p>Tuning shops, dyno facilities, and performance garages looking to offer FAS products to customers</p>
          </div>
          <div class="apply-card">
            <h3>üèÅ Race Teams</h3>
            <p>Professional and amateur racing teams needing reliable performance parts at wholesale pricing</p>
          </div>
          <div class="apply-card">
            <h3>üõí Online Resellers</h3>
            <p>E-commerce stores, eBay/Amazon sellers, and online performance parts retailers</p>
          </div>
          <div class="apply-card">
            <h3>üîß Mobile Installers</h3>
            <p>Mobile tuning and installation services offering FAS products to clients</p>
          </div>
        </div>
      </div>
    </section>

    <section class="application-form">
      <div class="container">
        <h2>Apply for Wholesale Account</h2>
        <p class="form-intro">Fill out the form below and we'll review your application within 1-2 business days.</p>

        <form id="vendor-application-form">
          <fieldset>
            <legend>Company Information</legend>
            <div class="form-group">
              <label for="companyName">Company Name *</label>
              <input type="text" id="companyName" name="companyName" required />
            </div>

            <div class="form-group">
              <label for="businessType">Business Type *</label>
              <select id="businessType" name="businessType" required>
                <option value="">Select type...</option>
                <option value="performance_shop">Performance Shop</option>
                <option value="tuning_shop">Tuning Shop</option>
                <option value="race_team">Race Team</option>
                <option value="online_retailer">Online Retailer</option>
                <option value="mobile_installer">Mobile Installer</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div class="form-group">
              <label for="website">Website</label>
              <input type="url" id="website" name="website" placeholder="https://" />
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="yearsInBusiness">Years in Business *</label>
                <input type="number" id="yearsInBusiness" name="yearsInBusiness" min="0" required />
              </div>

              <div class="form-group">
                <label for="taxId">Tax ID / EIN *</label>
                <input type="text" id="taxId" name="taxId" required />
                <small>Required for wholesale pricing</small>
              </div>
            </div>
          </fieldset>

          <fieldset>
            <legend>Primary Contact</legend>
            <div class="form-row">
              <div class="form-group">
                <label for="contactName">Full Name *</label>
                <input type="text" id="contactName" name="contactName" required />
              </div>
              <div class="form-group">
                <label for="contactTitle">Title *</label>
                <input type="text" id="contactTitle" name="contactTitle" placeholder="Owner, Manager, etc." required />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="contactEmail">Email *</label>
                <input type="email" id="contactEmail" name="contactEmail" required />
              </div>
              <div class="form-group">
                <label for="contactPhone">Phone *</label>
                <input type="tel" id="contactPhone" name="contactPhone" required />
              </div>
            </div>
          </fieldset>

          <fieldset>
            <legend>Business Address</legend>
            <div class="form-group">
              <label for="street">Street Address *</label>
              <input type="text" id="street" name="street" required />
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="city">City *</label>
                <input type="text" id="city" name="city" required />
              </div>
              <div class="form-group">
                <label for="state">State *</label>
                <input type="text" id="state" name="state" maxlength="2" placeholder="NY" required />
              </div>
              <div class="form-group">
                <label for="zip">ZIP Code *</label>
                <input type="text" id="zip" name="zip" required />
              </div>
            </div>
          </fieldset>

          <fieldset>
            <legend>Business Details</legend>
            <div class="form-group">
              <label for="estimatedMonthlyVolume">Estimated Monthly Order Volume *</label>
              <select id="estimatedMonthlyVolume" name="estimatedMonthlyVolume" required>
                <option value="">Select range...</option>
                <option value="under_1k">Under $1,000</option>
                <option value="1k_5k">$1,000 - $5,000</option>
                <option value="5k_10k">$5,000 - $10,000</option>
                <option value="10k_25k">$10,000 - $25,000</option>
                <option value="25k_plus">$25,000+</option>
              </select>
            </div>

            <div class="form-group">
              <label for="productsInterested">Which FAS products are you interested in?</label>
              <textarea id="productsInterested" name="productsInterested" rows="3" placeholder="FAS 850, FAS 900, Turbo kits, etc."></textarea>
            </div>

            <div class="form-group">
              <label for="currentSuppliers">Current Performance Parts Suppliers</label>
              <textarea id="currentSuppliers" name="currentSuppliers" rows="2" placeholder="Who do you currently buy from?"></textarea>
            </div>

            <div class="form-group checkbox-group">
              <label>
                <input type="checkbox" name="taxExempt" value="true" />
                We have a valid resale certificate (tax exempt)
              </label>
            </div>
          </fieldset>

          <fieldset>
            <legend>Additional Information</legend>
            <div class="form-group">
              <label for="additionalInfo">Tell us about your business</label>
              <textarea id="additionalInfo" name="additionalInfo" rows="4" placeholder="What makes your business unique? What are your goals?"></textarea>
            </div>

            <div class="form-group">
              <label for="referralSource">How did you hear about FAS Motorsports?</label>
              <select id="referralSource" name="referralSource">
                <option value="">Select...</option>
                <option value="google">Google Search</option>
                <option value="social_media">Social Media</option>
                <option value="referral">Referral from another vendor</option>
                <option value="trade_show">Trade Show</option>
                <option value="customer">Customer recommendation</option>
                <option value="other">Other</option>
              </select>
            </div>
          </fieldset>

          <div class="form-actions">
            <button type="submit" class="btn-primary">Submit Application</button>
            <p class="form-note">* Required fields</p>
          </div>

          <div id="form-message" class="form-message"></div>
        </form>
      </div>
    </section>

    <section class="faq">
      <div class="container">
        <h2>Frequently Asked Questions</h2>
        <div class="faq-item">
          <h3>What are the requirements to become a vendor?</h3>
          <p>You need a valid business license, tax ID/EIN, and resale certificate. We work with established businesses that have been operating for at least 1 year.</p>
        </div>

        <div class="faq-item">
          <h3>How long does approval take?</h3>
          <p>Most applications are reviewed within 1-2 business days. We'll contact you via email with next steps.</p>
        </div>

        <div class="faq-item">
          <h3>What are the payment terms?</h3>
          <p>We offer Net 30, Net 60, or Net 90 payment terms based on your credit approval. Credit limits range from $5,000 to $50,000+.</p>
        </div>

        <div class="faq-item">
          <h3>Is there a minimum order amount?</h3>
          <p>Yes, wholesale orders have a $500 minimum. This ensures we can offer the best pricing and service.</p>
        </div>

        <div class="faq-item">
          <h3>Do you offer drop shipping?</h3>
          <p>Yes! We can drop ship directly to your customers. Contact your account manager for details.</p>
        </div>

        <div class="faq-item">
          <h3>Can I get custom products made?</h3>
          <p>Absolutely. We manufacture in-house and can create custom builds for your customers.</p>
        </div>
      </div>
    </section>
  </div>
</BaseLayout>

<script>
  document.getElementById('vendor-application-form')?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const form = e.target as HTMLFormElement;
    const formData = new FormData(form);
    const button = form.querySelector('button[type="submit"]') as HTMLButtonElement | null;
    const message = document.getElementById('form-message');

    if (!message) return;

    button && (button.disabled = true);
    const originalText = button?.textContent || 'Submit Application';
    if (button) button.textContent = 'Submitting...';
    message.innerHTML = '';
    message.className = 'form-message';

    try {
      const data = {
        companyName: formData.get('companyName'),
        businessType: formData.get('businessType'),
        website: formData.get('website'),
        yearsInBusiness: formData.get('yearsInBusiness'),
        taxId: formData.get('taxId'),
        contactName: formData.get('contactName'),
        contactTitle: formData.get('contactTitle'),
        contactEmail: formData.get('contactEmail'),
        contactPhone: formData.get('contactPhone'),
        street: formData.get('street'),
        city: formData.get('city'),
        state: formData.get('state'),
        zip: formData.get('zip'),
        estimatedMonthlyVolume: formData.get('estimatedMonthlyVolume'),
        productsInterested: formData.get('productsInterested'),
        currentSuppliers: formData.get('currentSuppliers'),
        taxExempt: formData.get('taxExempt') === 'true',
        additionalInfo: formData.get('additionalInfo'),
        referralSource: formData.get('referralSource')
      };

      const response = await fetch('/.netlify/functions/vendor-application', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      const result = await response.json().catch(() => ({}));

      if (response.ok) {
        message.innerHTML = `
          <div class="success-content">
            <h3>‚úÖ Application Submitted!</h3>
            <p>Thanks for your interest in partnering with FAS Motorsports.</p>
            <p>We'll review your application and contact you within 1-2 business days at <strong>${data.contactEmail || ''}</strong>.</p>
            ${result?.applicationNumber ? `<p style="margin-top: 1.5rem;">Application Number: <strong>${result.applicationNumber}</strong></p>` : ''}
          </div>
        `;
        message.className = 'form-message success';
        (message as HTMLElement).style.display = 'block';
        form.reset();
        message.scrollIntoView({ behavior: 'smooth', block: 'center' });
      } else {
        throw new Error(result.error || 'Application failed');
      }
    } catch (error) {
      message.innerHTML = `
        <div class="error-content">
          <h3>‚ùå Submission Failed</h3>
          <p>${error instanceof Error ? error.message : 'Something went wrong. Please try again.'}</p>
        </div>
      `;
      message.className = 'form-message error';
      (message as HTMLElement).style.display = 'block';
    } finally {
      if (button) {
        button.disabled = false;
        button.textContent = originalText;
      }
    }
  });
</script>

<style>
  .vendor-application-page {
    padding: 0;
  }

  .hero {
    background: linear-gradient(135deg, #000 0%, #1a1a1a 100%);
    color: white;
    padding: 4rem 0;
    text-align: center;
  }

  .hero h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
  }

  .hero .subtitle {
    font-size: 1.5rem;
    opacity: 0.9;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  section {
    padding: 4rem 0;
  }

  .benefits {
    background: #f9f9f9;
  }

  .benefits h2,
  .who-should-apply h2,
  .application-form h2,
  .faq h2 {
    text-align: center;
    font-size: 2.5rem;
    margin-bottom: 3rem;
  }

  .benefits-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
  }

  .benefit {
    background: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  .benefit .icon {
    font-size: 3rem;
    margin-bottom: 1rem;
  }

  .benefit h3 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
  }

  .benefit p {
    margin-bottom: 1rem;
    color: #666;
  }

  .benefit ul {
    list-style: none;
    padding: 0;
  }

  .benefit ul li {
    padding: 0.5rem 0;
    padding-left: 1.5rem;
    position: relative;
  }

  .benefit ul li:before {
    content: "‚úì";
    position: absolute;
    left: 0;
    color: #00a651;
    font-weight: bold;
  }

  .apply-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
  }

  .apply-card {
    background: white;
    padding: 2rem;
    border-radius: 8px;
    border: 2px solid #e0e0e0;
    transition: border-color 0.3s;
  }

  .apply-card:hover {
    border-color: #000;
  }

  .apply-card h3 {
    font-size: 1.3rem;
    margin-bottom: 1rem;
  }

  .application-form {
    background: white;
  }

  .form-intro {
    text-align: center;
    font-size: 1.1rem;
    color: #666;
    margin-bottom: 3rem;
  }

  form {
    max-width: 800px;
    margin: 0 auto;
  }

  fieldset {
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 2rem;
    margin-bottom: 2rem;
  }

  legend {
    font-size: 1.3rem;
    font-weight: bold;
    padding: 0 1rem;
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }

  label {
    display: block;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }

  input,
  select,
  textarea {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1rem;
    font-family: inherit;
  }

  input:focus,
  select:focus,
  textarea:focus {
    outline: none;
    border-color: #000;
    box-shadow: 0 0 0 3px rgba(0,0,0,0.1);
  }

  small {
    display: block;
    margin-top: 0.25rem;
    color: #666;
    font-size: 0.875rem;
  }

  .checkbox-group label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: normal;
  }

  .checkbox-group input[type="checkbox"] {
    width: auto;
  }

  .form-actions {
    text-align: center;
    margin-top: 2rem;
  }

  .btn-primary {
    background: #000;
    color: white;
    padding: 1rem 3rem;
    font-size: 1.1rem;
    font-weight: bold;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background 0.3s;
  }

  .btn-primary:hover:not(:disabled) {
    background: #333;
  }

  .btn-primary:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .form-note {
    margin-top: 1rem;
    color: #666;
    font-size: 0.875rem;
  }

  .form-message {
    margin-top: 2rem;
    padding: 2rem;
    border-radius: 8px;
    display: none;
  }

  .form-message.success {
    display: block;
    background: #e8f5e9;
    border: 2px solid #4caf50;
  }

  .form-message.error {
    display: block;
    background: #ffebee;
    border: 2px solid #f44336;
  }

  .form-message h3 {
    margin-bottom: 1rem;
  }

  .faq {
    background: #f9f9f9;
  }

  .faq-item {
    background: white;
    padding: 2rem;
    margin-bottom: 1rem;
    border-radius: 8px;
    border-left: 4px solid #000;
  }

  .faq-item h3 {
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
  }

  .faq-item p {
    color: #666;
    line-height: 1.6;
  }

  @media (max-width: 768px) {
    .hero h1 {
      font-size: 2rem;
    }

    .hero .subtitle {
      font-size: 1.2rem;
    }

    .benefits-grid,
    .apply-grid {
      grid-template-columns: 1fr;
    }

    .form-row {
      grid-template-columns: 1fr;
    }

    fieldset {
      padding: 1rem;
    }
  }
</style>
