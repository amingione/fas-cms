---
import BaseLayout from '../layouts/BaseLayout.astro';
import BuildComponent from '../components/BuildPage.jsx';
import GarageDashboard from '../components/GarageDashboard.jsx';
import BuildPageWrapper from '../components/BuildPageWrapper.jsx';
import PropTypes from '../components/prop-types.astro'; // Import PropTypes

// This version removes server-side savedBuilds and shifts logic to React state
---

<BaseLayout>
    <div class="max-w-6xl mx-auto px-4 py-12 bg-black text-white">
    <h1 class="text-4xl font-bold mb-8 text-center">Build & Quote Your Beast</h1>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <div>
        <BuildComponent onSubmit={(data) => {
          console.log('Form submitted with data:', data);
          
          const quote = {
            vehicleModel: data.vehicleModel,
            modifications: data.modifications,
            horsepower: data.horsepower,
            price: data.horsepower * 1000, 
          };
          
          savedBuilds.push(quote); 

        }} />
      </div>
      
      <div>
        <GarageDashboard savedBuilds={savedBuilds} />
      </div>
    </div>
  </div>
  <div class="max-w-6xl mx-auto px-4 py-12 bg-black text-white">
    <h1 class="text-4xl font-bold mb-8 text-center">Build & Quote Your Beast</h1>

    <BuildPageWrapper client:only="react" />
  </div>
</BaseLayout>