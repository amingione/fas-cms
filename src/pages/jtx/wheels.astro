---
import BaseLayout from '@/layouts/BaseLayout.astro';
import JtxHero from '@/components/jtx/JtxHero.astro';
import JtxBreadcrumbs from '@/components/jtx/JtxBreadcrumbs.astro';
import JtxSidebar from '@/components/jtx/JtxSidebar.astro';
import JtxWheelSpecForm from '@/components/jtx/JtxWheelSpecForm';
import { JTX_SERIES } from '@/content/jtx/options';

// Read ?series=... and validate against known series
const url = new URL(Astro.request.url);
const qsSeries = url.searchParams.get('series');
const defaultSeries = (qsSeries && (JTX_SERIES as readonly string[]).includes(qsSeries)) ? qsSeries as (typeof JTX_SERIES)[number] : undefined;
---
<BaseLayout>
  <JtxHero title="JTX Forged — Custom Spec Quote" subtitle="ARC Monoforged truck wheels with premium finishes and popular 5/6/8 lug patterns." />
  <div class="mx-auto max-w-7xl px-6 py-6">
    <JtxBreadcrumbs current="overview" />
    <div class="grid md:grid-cols-[260px_1fr] gap-8">
      <JtxSidebar current="overview" />
      <main class="space-y-8">
        <section class="prose prose-invert max-w-none">
          <h2>Why JTX Forged at FAS</h2>
          <p>Premium forged monoblock wheels built for trucks. We’ll help you pick size, bolt pattern, and offset for a dialed fit.</p>
        </section>
        <JtxWheelSpecForm client:only="react" pageContext="jtx-overview" defaultSeries={defaultSeries} />
      </main>
    </div>
  </div>
</BaseLayout>
