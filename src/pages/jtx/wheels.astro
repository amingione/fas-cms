---
import BaseLayout from '@/layouts/BaseLayout.astro';
import JtxHero from '@/components/jtx/JtxHero.astro';
import JtxSidebar from '@/components/jtx/JtxSidebar.astro';
import JtxWheelSpecForm from '@/components/jtx/JtxWheelSpecForm';
import { JTX_SERIES } from '@/content/jtx/options';

// Read ?series=... and validate against known series
const url = new URL(Astro.request.url);
const qsSeries = url.searchParams.get('series');
const defaultSeries = (qsSeries && (JTX_SERIES as readonly string[]).includes(qsSeries)) ? qsSeries as (typeof JTX_SERIES)[number] : undefined;
url.search = '';
url.hash = '';
const canonical = url.toString();

const pageTitle = 'JTX Forged Wheels Quote';
const pageDescription = 'Start a custom JTX Forged wheel specification with F.A.S. Motorsports. Choose ARC monoforged series, finishes, and offsets for your truck build.';

const breadcrumbStructuredData = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    {
      '@type': 'ListItem',
      position: 1,
      name: 'Home',
      item: `${url.origin}/`
    },
    {
      '@type': 'ListItem',
      position: 2,
      name: 'JTX Wheels',
      item: canonical
    }
  ]
};
---
<BaseLayout title={pageTitle} description={pageDescription} canonical={canonical}>
  <Fragment slot="head">
    <script type="application/ld+json" set:html={JSON.stringify(breadcrumbStructuredData)} />
  </Fragment>
  <JtxHero title="JTX Forged — Custom Spec Quote" subtitle="ARC Monoforged truck wheels with premium finishes and popular 5/6/8 lug patterns." />
  <div class="mx-auto max-w-7xl px-6 py-6">
    <div class="grid md:grid-cols-[260px_1fr] gap-8">
      <JtxSidebar current="overview" />
      <main class="space-y-8">
        <section class="prose prose-invert max-w-none">
          <h2>Why JTX Forged at FAS</h2>
          <p>Premium forged monoblock wheels built for trucks. We’ll help you pick size, bolt pattern, and offset for a dialed fit.</p>
        </section>
        <JtxWheelSpecForm client:only="react" pageContext="jtx-overview" defaultSeries={defaultSeries} />
      </main>
    </div>
  </div>
</BaseLayout>
