---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getGitPageDoc, sbFieldPath } from '@lib/stackbit';
const pageDoc: any = await getGitPageDoc('truckPackages');
import { Button } from '@/components/ui/button';
---

<BaseLayout title="Truck Packages">
  <div aria-hidden="true" class="hidden" {...sbFieldPath('title')}>{pageDoc?.title ?? 'Truck Packages'}</div>
  <!-- Hero Section with Parallax -->
  <section class="parallax-section hero section-divider section-divider-carbon">
    <div class="background-layer"></div>
    <div class="midground-layer">
      <!-- Editable: Replace src with your truck image path -->
      <img src="/images/DT FAS TRX Package copy.png" alt="Truck Midground Placeholder" class="midground-image">
    </div>
    <div class="foreground-layer">
      <h1 class="font-ethno text-4xl md:text-5xl lg:text-6xl text-primary mb-4" {...sbFieldPath('title')}>
        {pageDoc?.title ?? 'Discover Premium Truck Packages'}
      </h1>
      <p class="font-body text-secondary text-lg md:text-xl mb-6 max-w-2xl mx-auto">
        <!-- Editable: Change this description text -->
        Tailored solutions for every hauling need. Scroll to explore.
      </p>
      <!-- Editable: Replace src with your logo or accent image -->
      <img src="/images/jtx forged single.png" alt="Accent Placeholder" class="accent-image">
      <Button className="bg-primary text-white font-ethno rounded-xl px-6 py-3 shadow-lg hover:bg-primary/90 transition-all duration-300">
        Get Started
      </Button>
    </div>
  </section>

  <!-- Packages Section -->
  <section class="packages section-divider section-divider-carbon luxury-carbon-effect">
    <h2 class="font-ethno text-primary">
      <!-- Editable: Change section title -->
      Our Truck Packages
    </h2>
    <div class="package-grid">
      <!-- Package Card 1: Duplicate this div for more cards and edit content -->
      <div class="package-card">
        <!-- Editable: Replace src with your package photo -->
        <img src="/images/faslogochroma.png" alt="Standard Package Placeholder" class="package-image">
        <h3 class="font-ethno text-primary">
          <!-- Editable: Change card title -->
          Standard Package
        </h3>
        <p class="font-body text-secondary">
          <!-- Editable: Change description -->
          Ideal for small businesses with basic hauling requirements. Includes essential features like GPS tracking and fuel efficiency.
        </p>
        <ul class="font-body text-secondary">
          <!-- Editable: Add/remove list items -->
          <li>Feature 1: 500 HP Engine</li>
          <li>Feature 2: Comfort Cabin</li>
          <li>Feature 3: Basic Warranty</li>
        </ul>
        <Button className="bg-accent text-primary font-ethno rounded-lg px-5 py-2 shadow-md hover:bg-accent/90 transition-all duration-300">
          Learn More
        </Button>
      </div>

      <!-- Package Card 2 -->
      <div class="package-card">
        <img src="/images/faslogochroma.png" alt="Pro Package Placeholder" class="package-image">
        <h3 class="font-ethno text-primary">Pro Package</h3>
        <p class="font-body text-secondary">Advanced options for heavy-duty operations. Enhanced durability and tech integrations.</p>
        <ul class="font-body text-secondary">
          <li>Feature 1: 700 HP Engine</li>
          <li>Feature 2: Advanced Safety Systems</li>
          <li>Feature 3: Extended Warranty</li>
        </ul>
        <Button className="bg-accent text-primary font-ethno rounded-lg px-5 py-2 shadow-md hover:bg-accent/90 transition-all duration-300">
          Learn More
        </Button>
      </div>

      <!-- Package Card 3 -->
      <div class="package-card">
        <img src="/images/faslogochroma.png" alt="Elite Package Placeholder" class="package-image">
        <h3 class="font-ethno text-primary">Elite Package</h3>
        <p class="font-body text-secondary">Top-tier customization for enterprise-level needs. Premium materials and cutting-edge innovations.</p>
        <ul class="font-body text-secondary">
          <li>Feature 1: 900 HP Engine</li>
          <li>Feature 2: Luxury Interior</li>
          <li>Feature 3: Lifetime Support</li>
        </ul>
        <Button className="bg-accent text-primary font-ethno rounded-lg px-5 py-2 shadow-md hover:bg-accent/90 transition-all duration-300">
          Learn More
        </Button>
      </div>
    </div>
  </section>

  <!-- Features Section with Subtle Parallax -->
  <section class="features relative section-divider-carbon">
    <div class="background-layer features-bg"></div>
    <div class="foreground-layer">
      <h2 class="font-ethno text-primary">
        <!-- Editable: Change title -->
        Key Features
      </h2>
      <div class="feature-grid">
        <!-- Feature Item: Duplicate and edit -->
        <div class="feature-item">
          <img src="/images/faslogochroma.png" alt="Feature Placeholder" class="feature-image">
          <h3 class="font-ethno text-primary">Durability</h3>
          <p>Built to last in tough conditions.</p>
        </div>
        <div class="feature-item">
          <img src="/images/faslogochroma.png" alt="Feature Placeholder" class="feature-image">
          <h3 class="font-ethno text-primary">Efficiency</h3>
          <p>Optimized for fuel savings.</p>
        </div>
        <div class="feature-item">
          <img src="/images/faslogochroma.png" alt="Feature Placeholder" class="feature-image">
          <h3 class="font-ethno text-primary">Technology</h3>
          <p>Integrated smart systems.</p>
        </div>
      </div>
    </div>
  </section>

  <style>
    /* Dark UI Palette - Editable: Change colors via CSS variables */

    /* 3D depth & glow helpers */
    .parallax-section {
      perspective: 1000px;
    }

    .parallax-section .background-layer,
    .parallax-section .midground-layer,
    .parallax-section .foreground-layer {
      transform-style: preserve-3d;
      will-change: transform;
      transition: transform 0.2s ease-out;
    }

    /* Dark gradient overlay + glow border on bg layer */
    .parallax-section .background-layer {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      border-radius: 16px; /* soft corners for the 3D panel */
      overflow: hidden;    /* clip inner overlays to corners */
      box-shadow:
        0 0 40px var(--shadow-glow),      /* outer subtle glow */
        inset 0 0 60px rgba(0,0,0,0.4),   /* inner vignette */
        0 12px 40px var(--shadow-depth);  /* depth shadow */
      border: 1px solid rgba(255,255,255,0.06);
    }
    .parallax-section .background-layer::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, rgba(0,0,0,0.75) 0%, rgba(0,0,0,0.45) 40%, rgba(0,0,0,0.75) 100%);
      pointer-events: none;
    }
    /* Optional: subtle edge light on mid layer for pop */
    .parallax-section .midground-layer {
      border-radius: 12px;
      overflow: hidden;
      box-shadow:
        0 8px 24px rgba(0,0,0,0.45),
        inset 0 0 24px rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.05);
    }

    /* Parallax Sections */
    .parallax-section {
      position: relative;
      height: 100vh;
      overflow: hidden;
    }

    .background-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('/images/background-placeholder.jpg') no-repeat center/cover; /* Editable: Change background image */
      z-index: 1;
      transform: translateY(0);
    }

    .midground-layer {
      position: absolute;
      top: 20%;
      left: 10%;
      width: 80%;
      z-index: 2;
    }

    .midground-image {
      width: 100%;
      max-width: 600px;
      filter: drop-shadow(0 4px 12px var(--shadow-depth));
    }

    /* Foreground spacing â€” scope to sections */
    .parallax-section .foreground-layer {
      position: relative;
      z-index: 3;
      text-align: center;
      padding-top: 30vh; /* only the hero uses this large offset */
    }

    .features .foreground-layer {
      position: relative;
      z-index: 3;
      text-align: center;
      padding-top: clamp(12px, 2.5vw, 24px); /* small, responsive top space on mobile */
    }

    .accent-image {
      width: 150px;
      margin: 20px 0;
    }

    /* Section dividers with luxury glow */
    .section-divider { position: relative; }
    .section-divider::before {
      content: "";
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      top: 0; /* divider at top edge of each section */
      width: min(92%, 1200px);
      height: 2px;
      border-radius: 999px;
      opacity: 0.9;
      pointer-events: none;
    }
    /* Gold/Red glow */
    .section-divider-gold::before {
      background: linear-gradient(90deg, transparent 0%, rgba(212, 78, 55, 0.705) 15%, rgba(212, 63, 55, 0.665) 50%, rgba(212, 78, 55, 0.716) 85%, transparent 100%);
      box-shadow:
        0 0 25px rgba(212, 78, 55, 0.261),
        0 0 50px rgba(212, 63, 55, 0.2),
        0 0 75px rgba(212, 71, 55, 0.15);
    }
    /* Platinum glow */
    .section-divider-platinum::before {
      background: linear-gradient(90deg, transparent 0%, rgba(229, 228, 226, 0.9) 15%, rgba(229, 228, 226, 1) 50%, rgba(229, 228, 226, 0.9) 85%, transparent 100%);
      box-shadow:
        0 0 25px rgba(229, 228, 226, 0.35),
        0 0 50px rgba(229, 228, 226, 0.2),
        0 0 75px rgba(229, 228, 226, 0.15);
    }
    /* Carbon subtle ice glow for hero */
    .section-divider-carbon::before {
      background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.35) 15%, rgba(255,255,255,0.6) 50%, rgba(255,255,255,0.35) 85%, transparent 100%);
      box-shadow:
        0 0 25px rgba(255,255,255,0.18),
        0 0 50px rgba(255,255,255,0.12),
        0 0 75px rgba(255,255,255,0.08);
    }

    /* Packages Section */
    .packages {
      padding: 60px 20px;
      text-align: center;
    }

    .package-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .package-card {
      background: color-mix(in srgb, var(--bg-dark) 95%, #000);
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 8px 24px var(--shadow-glow), 0 4px 12px var(--shadow-depth);
      transition: transform 0.3s ease;
    }

    .package-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 32px var(--shadow-glow), 0 6px 16px var(--shadow-depth);
    }

    .package-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 5px;
      margin-bottom: 15px;
    }

    /* Features Section */
    .features {
      padding: 40px 16px 96px; /* more bottom padding to avoid FAB/footer overlap */
    }

    @media (min-width: 768px) {
      .features { padding: 60px 20px 80px; }
    }

    .features-bg {
      background: url('/images/about page background FAS copy.png') no-repeat center/cover; /* Editable: Change image */
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .feature-item {
      text-align: center;
      padding: 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      box-shadow: 0 4px 12px var(--shadow-depth);
    }

    .feature-image {
      width: 100px;
      height: 100px;
      object-fit: contain;
      margin-bottom: 10px;
    }
  </style>

  <script>
    // Vanilla JS Parallax + subtle 3D scale
    function updateParallax() {
      var sections = document.querySelectorAll('.parallax-section');
      var viewportH = window.innerHeight || document.documentElement.clientHeight;

      sections.forEach(function(section){
        var bg = section.querySelector('.background-layer');
        var mid = section.querySelector('.midground-layer');
        if (!bg) return;

        var rect = section.getBoundingClientRect();
        var sectionTop = window.scrollY + rect.top;
        var sectionHeight = rect.height;
        var scrollY = window.scrollY || window.pageYOffset || 0;

        if (scrollY >= sectionTop - viewportH && scrollY <= sectionTop + sectionHeight) {
          var rel = (scrollY - sectionTop) / Math.max(sectionHeight, 1); // 0..1 across the section
          rel = Math.max(0, Math.min(1, rel));

          // Parallax offsets (tweak for taste)
          var bgOffset = (scrollY - sectionTop) * 0.30; // slower bg
          var midOffset = (scrollY - sectionTop) * 0.50; // mid speed

          // Depth scales for a pop effect
          var bgScale = 1.06;  // slightly zoomed back layer
          var midScale = 1.03; // subtle on mid layer

          (bg as HTMLElement).style.transform = 'translate3d(0,' + bgOffset + 'px, 0) scale(' + bgScale + ')';
          if (mid) {
            (mid as HTMLElement).style.transform = 'translate3d(0,' + midOffset + 'px, 0) scale(' + midScale + ')';
          }
        }
      });
    }

    window.addEventListener('scroll', updateParallax, { passive: true });
    window.addEventListener('resize', updateParallax);
    document.addEventListener('DOMContentLoaded', updateParallax);
    updateParallax(); // Initial call
  </script>

</BaseLayout>
