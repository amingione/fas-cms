---
import BaseLayout from "../../layouts/BaseLayout.astro";
import accountEditScriptUrl from '@/scripts/account-edit-page.ts?url';
---

<BaseLayout hideBrandTag>
  <main class="min-h-screen text-white p-8">
    <div id="account-edit" class="max-w-3xl mx-auto">
      <!-- Netlify Form: Account Edit (no server code, no JS required) -->
      <form
        name="account"
        id="account-edit-form"
        method="POST"
        data-netlify="true"
        netlify-honeypot="bot-field"
        action="/account/edit/success"
        class="space-y-6 rounded-lg border border-white/10 bg-black/50 p-6 shadow-md"
      >
        <input type="hidden" name="form-name" value="account" />
        <p class="hidden"><label>Don’t fill this out if you’re human: <input name="bot-field" /></label></p>

        <h1 class="text-2xl font-ethno mb-2">Edit Account</h1>
        <p class="text-sm text-white/70">Submit changes and our team will update your profile.</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label for="firstName" class="block text-sm mb-1">First Name</label>
            <input id="firstName" name="firstName" type="text" class="w-full rounded bg-white/5 border border-white/15 p-2" />
          </div>
          <div>
            <label for="lastName" class="block text-sm mb-1">Last Name</label>
            <input id="lastName" name="lastName" type="text" class="w-full rounded bg-white/5 border border-white/15 p-2" />
          </div>
          <div>
            <label for="email" class="block text-sm mb-1">Email</label>
            <input id="email" name="email" type="email" required class="w-full rounded bg-white/5 border border-white/15 p-2" />
          </div>
          <div>
            <label for="phone" class="block text-sm mb-1">Phone</label>
            <input id="phone" name="phone" type="tel" class="w-full rounded bg-white/5 border border-white/15 p-2" />
          </div>
          <div class="md:col-span-2">
            <label for="shippingAddress" class="block text-sm mb-1">Shipping Address</label>
            <input id="shippingAddress" name="shippingAddress" type="text" class="w-full rounded bg-white/5 border border-white/15 p-2" />
          </div>
          <div class="md:col-span-2">
            <label for="billingAddress" class="block text-sm mb-1">Billing Address</label>
            <input id="billingAddress" name="billingAddress" type="text" class="w-full rounded bg-white/5 border border-white/15 p-2" />
          </div>
        </div>

        <fieldset class="mt-2">
          <legend class="text-sm mb-2">Preferences</legend>
          <label class="flex items-center gap-2 mb-1"><input type="checkbox" name="emailOptIn" value="yes" /> Email updates</label>
          <label class="flex items-center gap-2 mb-1"><input type="checkbox" name="textOptIn" value="yes" /> Text updates</label>
          <label class="flex items-center gap-2"><input type="checkbox" name="marketingOptIn" value="yes" /> Marketing emails</label>
        </fieldset>

        <!-- Netlify reCAPTCHA v2 -->
        <div class="mt-4" data-netlify-recaptcha="true"></div>

        <div class="pt-2">
          <button type="submit" class="rounded bg-primary px-4 py-2 text-black hover:bg-primary/90">Submit Changes</button>
        </div>
      </form>
    </div>

    <!-- Optional: JS enhancement keeps working if you prefer dynamic editing -->
    <script type="module" src={accountEditScriptUrl}></script>
  </main>
</BaseLayout>
