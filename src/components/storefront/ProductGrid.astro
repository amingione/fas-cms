---
import ProductCardLite from '@components/storefront/ProductCardLite.astro';

interface Product { images?: any[] }
const { products = [], emptyMessage = 'No products found.', view = 'grid' } = Astro.props as { products: Product[]; emptyMessage?: string; view?: 'grid' | 'list' }
---
{products.length > 0 ? (
  <div id="product-grid" class={`relative isolation-isolate z-0 ${view === 'list' ? 'space-y-3' : 'grid auto-rows-fr grid-cols-2 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-3'}`}>
    {products.map((p) => (
      <Fragment>
        <ProductCardLite product={p} productImage={p.images?.[0]} layout={view} />
      </Fragment>
    ))}
  </div>
) : (
  <div class="mt-10 flex flex-col items-center justify-center rounded-xl border border-white/20 bg-black/60 px-6 py-12 text-center text-white/80">
    <div class="font-ethno text-white text-lg">{emptyMessage}</div>
    <div class="mt-3 text-sm text-white/70">Try removing a filter or browsing all products.</div>
    <a href="/shop" class="mt-5 inline-flex items-center justify-center rounded-fx-md bg-primary px-4 py-2 font-semibold text-white hover:bg-primary/90 hover:text-white">Clear filters</a>
  </div>
)}
