<div class="fixed top-0 right-0 z-[9998] pointer-events-auto w-72 bg-[#1a1a1a]">

  <aside
    id="accountDashboard"
    style="background-color: #1e1e1e"
    class="w-[220px] h-screen font-ethno text-white pt-0 px-6 shadow-lg space-y-6 fixed top-20 right-0 z-[9999] pointer-events-auto"
  >
    <p id="userEmail" class="text-xs text-gray-400 mb-2"></p>
    <p id="userGreeting" class="text-sm text-white font-ethno"></p>
    <nav class="flex flex-col space-y-4 font-kwajong font-bold">
      <button
        id="loginLink"
        type="button"
        class="mt-10 text-red-500 hover:text-white transition-colors hidden focus:outline-none focus:ring-2 focus:ring-red-400 rounded"
      >
        Login
      </button>
      <button
        id="logoutLink"
        type="button"
        class="mt-10 text-red-500 hover:text-white transition-colors hidden focus:outline-none focus:ring-2 focus:ring-red-400 rounded"
      >
        Logout
      </button>
      <a href="/account" class="hover:text-primary font-bold font-kwajong transition-colors">My Account</a>
    </nav>
    <div class="mt-8 border-t border-gray-700 pt-4">
      <h3 class="text-xs font-bold text-gray-400 mb-2">Vendor Access</h3>
      <nav class="flex flex-col space-y-2 text-sm font-kwajong">
        <a href="/vendor/login" class="text-blue-400 hover:text-white transition">Vendor Login</a>
        <a href="https://fasmotorsports.io/vendor/apply" class="text-blue-400 hover:text-white transition">New Dealer Application</a>
      </nav>
    </div>
    <div class="mt-8 border-t border-gray-700 pt-4 text-[1.2rem] font-captain">
      <p class="mb-2 text-gray-300">Need help?</p>
      <div class="flex items-center space-x-2 mb-1">
        <span class="text-xs font-captain rem-1.2 text-gray-400">support@fasmotorsports.com</span>
      </div>
      <div class="flex items-center space-x-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 5a2 2 0 012-2h1.5a2 2 0 011.8 1.2l1.2 2.8a2 2 0 01-.45 2.2l-1.1 1.1a16 16 0 006.6 6.6l1.1-1.1a2 2 0 012.2-.45l2.8 1.2a2 2 0 011.2 1.8V19a2 2 0 01-2 2h-1C9.4 21 3 14.6 3 7V6a2 2 0 012-2z"/>
        </svg>
        <span class="text-xs font-captain rem-1.2 text-gray-400">(812) 200-9012</span>
      </div>
    </div>
  </aside>
</div>
<script type="module">
  import { getAuth0Client } from '/src/lib/auth.ts';
  window.addEventListener('DOMContentLoaded', async () => {
    const dashboard = document.getElementById('accountDashboard');
    const loginLink = document.getElementById('loginLink');
    const logoutLink = document.getElementById('logoutLink');
    const emailEl = document.getElementById('userEmail');
    const greetingEl = document.getElementById('userGreeting');

    const auth0 = await getAuth0Client();
    const isAuthenticated = await auth0.isAuthenticated();
    const user = isAuthenticated ? await auth0.getUser() : null;

    if (isAuthenticated && user?.email) {
      logoutLink.classList.remove('hidden');
      loginLink.classList.add('hidden');
      if (emailEl) emailEl.textContent = user.email;
      if (greetingEl) greetingEl.textContent = `Hello, ${user.given_name || user.name || user.email}`;
    } else {
      loginLink.classList.remove('hidden');
      logoutLink.classList.add('hidden');
    }

    loginLink?.addEventListener('click', async (e) => {
      e.preventDefault();
      await auth0.loginWithRedirect({
        authorizationParams: { redirect_uri: window.location.origin + '/account' }
      });
    });

    logoutLink?.addEventListener('click', async (e) => {
      e.preventDefault();
      await auth0.logout({ logoutParams: { returnTo: window.location.origin } });
    });
  });
</script>