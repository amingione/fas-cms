<div class="fixed top-0 right-0 z-[9998] pointer-events-auto w-72 bg-[#1a1a1a]">

  <aside
    id="accountDashboard"
    style="background-color: #1e1e1e"
    class="w-[220px] h-screen font-ethno text-white pt-0 px-6 shadow-lg space-y-6 fixed top-20 right-0 z-[9999] pointer-events-auto"
  >
    <p id="userEmail" class="text-xs text-gray-400 mb-2"></p>
    <nav class="flex flex-col space-y-4 font-kwajong font-bold">
      <a href="https://fasmotorsports.io/sign-in" id="loginLink" class="mt-10 text-red-500 hover:text-white transition-colors hidden">Login</a>
      <a href="/logout" id="logoutLink" class="mt-10 text-red-500 hover:text-white transition-colors hidden">Logout</a>
      <a href="/account" class="hover:text-primary font-bold font-kwajong transition-colors">My Account</a>
    </nav>
    <div class="mt-8 border-t border-gray-700 pt-4">
      <h3 class="text-xs font-bold text-gray-400 mb-2">Vendor Access</h3>
      <nav class="flex flex-col space-y-2 text-sm font-kwajong">
        <a href="/vendor/login" class="text-blue-400 hover:text-white transition">Vendor Login</a>
        <a href="/vendor/dashboard" class="text-blue-400 hover:text-white transition">Vendor Dashboard</a>
      </nav>
    </div>
    <div class="mt-8 border-t border-gray-700 pt-4 text-[1.2rem] font-captain">
      <p class="mb-2 text-gray-300">Need help?</p>
      <div class="flex items-center space-x-2 mb-1">
        <span class="text-xs font-captain rem-1.2 text-gray-400">support@fasmotorsports.com</span>
      </div>
      <div class="flex items-center space-x-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 5a2 2 0 012-2h1.5a2 2 0 011.8 1.2l1.2 2.8a2 2 0 01-.45 2.2l-1.1 1.1a16 16 0 006.6 6.6l1.1-1.1a2 2 0 012.2-.45l2.8 1.2a2 2 0 011.2 1.8V19a2 2 0 01-2 2h-1C9.4 21 3 14.6 3 7V6a2 2 0 012-2z"/>
        </svg>
        <span class="text-xs font-captain rem-1.2 text-gray-400">(812) 200-9012</span>
      </div>
    </div>
  </aside>
</div>
<script type="module">
  window.addEventListener('DOMContentLoaded', async () => {
    const dashboard = document.getElementById('accountDashboard');
    const loginLink = document.getElementById('loginLink');
    const logoutLink = document.getElementById('logoutLink');
    const emailEl = document.getElementById('userEmail');
    const email = localStorage.getItem('userEmail');

    if (email) {
      logoutLink.classList.remove('hidden');
      loginLink.classList.add('hidden');
      if (emailEl) emailEl.textContent = email;
    } else {
      loginLink.classList.remove('hidden');
      logoutLink.classList.add('hidden');
    }

    logoutLink?.addEventListener('click', (e) => {
      e.preventDefault();
      localStorage.removeItem('userEmail');
      location.reload();
    });

    try {
      const res = await fetch('https://fasmotorsports.io/api/me', {
  credentials: 'include'
});
      const user = await res.json();

      if (user && user._type === 'customer') {
        dashboard.innerHTML += `<p class="text-xs text-green-400">Customer found in Sanity ✅</p>`;
      } else if (user && user._type === 'vendor') {
        dashboard.innerHTML += `<p class="text-xs text-blue-400">Vendor found in Sanity ✅</p>`;
      } else {
        dashboard.innerHTML += `<p class="text-xs text-red-500">No matching user record in Sanity ⚠️</p>`;
      }
    } catch (err) {
      console.error('Failed to fetch user data:', err);
      dashboard.innerHTML += `<p class="text-xs text-red-500">Unable to verify user status ⚠️</p>`;
    }
  });
</script>