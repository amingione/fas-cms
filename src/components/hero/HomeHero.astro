---
const VIDEO_SRC = 'https://framerusercontent.com/assets/1g8IkhtJmlWcC4zEYWKUmeGWzI.mp4';
const POSTER_SRC = '/images/backgrounds/bg-home.png';
---

<section
  id="homeHero"
  class="relative flex items-center justify-center pt-10 pb-6 mb-12 sm:mb-16 lg:mb-[-8px]"
>
  <div class="home-hero-wrapper">
    <img
      src={POSTER_SRC}
      alt="Performance parts background"
      width="1920"
      height="1080"
      loading="eager"
      decoding="async"
      fetchpriority="high"
      class="home-hero-poster"
    />
    <video
      class="home-hero-video"
      aria-hidden="true"
      loop
      muted
      playsinline
      preload="none"
      poster={POSTER_SRC}
      data-video-src={VIDEO_SRC}
    />
    <div aria-hidden="true" class="home-hero-overlay" />

    <div class="luxury-particles relative z-10 flex h-full flex-col items-center justify-center text-center px-4 py-16 sm:px-6 sm:py-20 pointer-events-none">
      <section
        aria-label="F.A.S. Motorsports"
        class="relative flex justify-center py-4 mb-6 sm:py-6 sm:mb-8 lg:py-8 lg:mb-10"
      >
        <div class="inline-flex items-center gap-3 rounded-full border border-white/20 bg-gradient-to-r from-white/10 via-white/5 to-transparent px-4 py-2 backdrop-blur-sm">
          <span class="font-borg text-primaryB text-base sm:text-xl">F.a.S.</span>
          <span class="font-ethno text-white text-base sm:text-xl">Motorsports</span>
        </div>
      </section>

      <p class="text-2xl text-gradient text-primary platinum mt-10 font-borg text-glow pb-2 sm:text-3xl">
        Power Up Your Ride
      </p>
      <h2 class="text-4xl font-bold font-ethno italic sm:text-6xl">
        Unleash <span class="text-gray-400">Performance</span>
      </h2>
      <p class="mt-2 text-base font-medium font-ethno italic text-white/70 sm:text-xl/8">
        Premium performance upgrades tailored to your build.
      </p>
      <div class="social-links">
        <a
          href="https://www.instagram.com/fas_moto"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Instagram"
        >
          <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M7.75 2h8.5A5.75 5.75 0 0122 7.75v8.5A5.75 5.75 0 0116.25 22h-8.5A5.75 5.75 0 012 16.25v-8.5A5.75 5.75 0 017.75 2zm0 1.5A4.25 4.25 0 003.5 7.75v8.5A4.25 4.25 0 007.75 20.5h8.5a4.25 4.25 0 004.25-4.25v-8.5A4.25 4.25 0 0016.25 3.5h-8.5zm4.25 3.25a5.25 5.25 0 110 10.5 5.25 5.25 0 010-10.5zm0 1.5a3.75 3.75 0 100 7.5 3.75 3.75 0 000-7.5zm5.25 1.25a1 1 0 110 2 1 1 0 010-2z" />
          </svg>
          <span>Instagram</span>
        </a>
        <span aria-hidden="true" class="separator" />
        <a
          href="https://www.facebook.com/fasmotorsportz"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Facebook"
        >
          <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54v-2.89h2.54v-2.203c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562v1.876h2.773l-.443 2.89h-2.33v6.987C18.343 21.128 22 16.991 22 12z" />
          </svg>
          <span>Facebook</span>
        </a>
      </div>
    </div>
  </div>
</section>

<style>
  .home-hero-wrapper {
    position: relative;
    width: 100%;
    overflow: hidden;
    border-radius: 0;
    min-height: 420px;
  }
  @media (min-width: 640px) {
    .home-hero-wrapper { min-height: 520px; }
  }
  @media (min-width: 1024px) {
    .home-hero-wrapper { min-height: 620px; }
  }
  .home-hero-poster,
  .home-hero-video {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .home-hero-video {
    opacity: 0;
    transition: opacity 600ms ease;
    filter: brightness(0.6) contrast(1.2) saturate(1.2) grayscale(100%);
  }
  .home-hero-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.55);
    backdrop-filter: blur(1px);
    pointer-events: none;
  }
  .social-links {
    pointer-events: auto;
    margin-top: 1.5rem;
    margin-bottom: 2rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    justify-content: center;
  }
  .social-links a {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.7);
    transition: color 200ms ease;
  }
  .social-links a svg {
    width: 1.25rem;
    height: 1.25rem;
  }
  .social-links a:hover {
    color: #ffffff;
  }
  .separator {
    width: 1px;
    height: 1.5rem;
    background: rgba(255, 255, 255, 0.2);
  }
</style>

<script is:inline>
  if (typeof window !== 'undefined') {
    const shouldReduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
    const shouldDeferForSaveData = connection && connection.saveData;

    if (!shouldReduceMotion && !shouldDeferForSaveData) {
      const loadHeroVideo = () => {
        const video = document.querySelector<HTMLVideoElement>('.home-hero-video');
        if (!video || video.dataset.loaded === 'true') return;

        const source = video.dataset.videoSrc;
        if (!source) return;

        video.src = source;
        video.dataset.loaded = 'true';
        video.addEventListener(
          'loadeddata',
          () => {
            video.style.opacity = '1';
          },
          { once: true }
        );

        const play = video.play();
        if (play && typeof play.catch === 'function') {
          play.catch(() => {
            /* Safari on iOS might block autoplay until user interaction. */
          });
        }
      };

      if ('requestIdleCallback' in window) {
        window.requestIdleCallback(loadHeroVideo, { timeout: 2000 });
      } else {
        window.setTimeout(loadHeroVideo, 800);
      }
    }
  }
</script>
